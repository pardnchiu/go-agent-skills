[
  {
    "type": "function",
    "function": {
      "name": "read_file",
      "description": "讀取指定路徑的檔案內容。用於檢查原始碼、設定檔或專案中的任何文字檔案。",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "要讀取的檔案路徑（相對於專案根目錄或絕對路徑）"
          }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "list_files",
      "description": "列出指定路徑的檔案和目錄。用於探索專案結構。",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "要列出的目錄路徑（相對於專案根目錄或絕對路徑）。使用 '.' 表示目前目錄。"
          },
          "recursive": {
            "type": "boolean",
            "description": "如果為 true，則遞迴列出檔案。預設為 false。"
          }
        },
        "required": ["path"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "glob_files",
      "description": "尋找符合 glob 模式的檔案。用於尋找特定檔案類型（例如 '**/*.go' 表示所有 Go 檔案）。",
      "parameters": {
        "type": "object",
        "properties": {
          "pattern": {
            "type": "string",
            "description": "用於比對檔案的 Glob 模式（例如 '**/*.go'、'src/**/*.ts'、'*.md'）"
          }
        },
        "required": ["pattern"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "write_file",
      "description": "將內容寫入檔案。如果檔案不存在則建立，如果存在則覆寫。",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "要寫入的檔案路徑（相對於專案根目錄或絕對路徑）"
          },
          "content": {
            "type": "string",
            "description": "要寫入檔案的內容"
          }
        },
        "required": ["path", "content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "search_content",
      "description": "在檔案內容中搜尋模式。返回符合的行及其檔案路徑和行號。",
      "parameters": {
        "type": "object",
        "properties": {
          "pattern": {
            "type": "string",
            "description": "要搜尋的文字或正規表示式模式"
          },
          "file_pattern": {
            "type": "string",
            "description": "可選的 glob 模式以篩選檔案（例如 '*.go'）"
          }
        },
        "required": ["pattern"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "search_history",
      "description": "在當前 session 的對話歷史（history.json）中搜尋關鍵字，返回包含該字詞的完整對話內容（含 role 與 content）。支援時間範圍過濾，僅返回指定時間內的紀錄。",
      "parameters": {
        "type": "object",
        "properties": {
          "keyword": {
            "type": "string",
            "description": "要搜尋的關鍵字（不區分大小寫，literal 字串比對）"
          },
          "time_range": {
            "type": "string",
            "enum": ["1d", "7d", "1m", "1y"],
            "description": "時間範圍過濾（1d=1天、7d=7天、1m=30天、1y=365天）。預設先用 1d，無結果再用 7d，仍無結果才考慮 1m/1y"
          }
        },
        "required": ["keyword"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "patch_edit",
      "description": "透過精確字串匹配來編輯檔案。僅替換第一個匹配項。適合對檔案進行小幅修改，比 write_file 更安全。",
      "parameters": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "要編輯的檔案路徑（相對於專案根目錄或絕對路徑）"
          },
          "old_string": {
            "type": "string",
            "description": "要被替換的原始內容（必須精確匹配）"
          },
          "new_string": {
            "type": "string",
            "description": "替換為的新內容"
          }
        },
        "required": ["path", "old_string", "new_string"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "run_command",
      "description": "執行 shell 指令並返回其輸出。用於執行建置工具、git 指令等。",
      "parameters": {
        "type": "object",
        "properties": {
          "command": {
            "type": "string",
            "description": "要執行的 shell 指令"
          }
        },
        "required": ["command"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "fetch_yahoo_finance",
      "description": "透過 Yahoo Finance 取得股票即時報價與 K 線資料。",
      "parameters": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "description": "股票代碼，例如 NVDA、AAPL、TSLA"
          },
          "interval": {
            "type": "string",
            "description": "K 線間距",
            "enum": ["1m", "2m", "5m", "15m", "30m", "60m", "1h", "1d", "1wk"],
            "default": "1m"
          },
          "range": {
            "type": "string",
            "description": "資料範圍",
            "enum": ["1d", "5d", "1mo", "3mo", "6mo", "1y", "2y", "5y", "ytd", "max"],
            "default": "1d"
          }
        },
        "required": ["symbol"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "fetch_google_rss",
      "description": "透過 Google News RSS 搜尋新聞，返回標題與真實文章連結。",
      "parameters": {
        "type": "object",
        "properties": {
          "keyword": {
            "type": "string",
            "description": "搜尋關鍵字（支援 Google 搜尋語法，如 'nvidia OR AMD'）"
          },
          "time": {
            "type": "string",
            "description": "時間範圍，可選值：1h / 3h / 6h / 12h / 24h / 7d",
            "enum": ["1h", "3h", "6h", "12h", "24h", "7d"]
          },
          "lang": {
            "type": "string",
            "description": "語言與地區設定，格式 '{country}:{lang}'，預設 'TW:zh-Hant'",
            "default": "TW:zh-Hant"
          }
        },
        "required": ["keyword", "time"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "send_http_request",
      "description": "發送 HTTP 請求並返回回應內容。支援 GET、POST（JSON/Form）等方法。適合呼叫 REST API、Webhook 或其他 HTTP 服務。",
      "parameters": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "完整的 URL（需包含 http:// 或 https://）"
          },
          "method": {
            "type": "string",
            "description": "HTTP 方法",
            "enum": ["GET", "POST", "PUT", "DELETE", "PATCH"],
            "default": "GET"
          },
          "headers": {
            "type": "object",
            "description": "請求標頭（key-value 格式），例如 {\"Authorization\": \"Bearer token\"}"
          },
          "body": {
            "type": "object",
            "description": "請求本體（JSON 格式），適用於 POST/PUT/PATCH"
          },
          "content_type": {
            "type": "string",
            "description": "Content-Type，可選值：json（預設）、form",
            "enum": ["json", "form"],
            "default": "json"
          },
          "timeout": {
            "type": "integer",
            "description": "請求超時秒數，預設 30 秒，最大 300 秒。一般 REST API 用 30；需要運算的 API（如 AI 生圖、語音合成、影片處理）建議設 120 以上",
            "default": 30
          }
        },
        "required": ["url"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "fetch_weather",
      "description": "取得指定城市（或目前 IP 位置）的即時天氣與預報，包含氣溫、體感溫度、濕度、風速、降雨機率等資訊。",
      "parameters": {
        "type": "object",
        "properties": {
          "city": {
            "type": "string",
            "description": "城市名稱（英文），例如 Taipei、Tokyo、London。留空則依 IP 自動定位"
          },
          "days": {
            "type": "integer",
            "description": "預報天數：-1=只回當前狀況不含預報、1=今天、2=今明兩天、3=三天（預設）",
            "default": 3
          },
          "hourly_interval": {
            "type": "string",
            "description": "每幾小時一筆 hourly 資料，可選 1/2/3/6/8/12/24，預設 6（即每天 4 筆：0/6/12/18 時）",
            "enum": ["1", "2", "3", "6", "8", "12", "24"],
            "default": "6"
          }
        },
        "required": []
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "fetch_page",
      "description": "使用 Chrome 瀏覽器開啟網頁，等待 JS 完整渲染後擷取內容，以 Markdown 格式返回。適合需要 JS 渲染的 SPA、動態頁面、或一般靜態頁面。",
      "parameters": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "要擷取內容的完整網址（需包含 https://）"
          }
        },
        "required": ["url"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "search_web",
      "description": "使用 Google 搜尋網路內容，返回標題、網址與摘要列表（JSON 格式）。適合查詢一般資訊、技術文件、產品資料等。",
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "搜尋關鍵字或問題"
          },
          "range": {
            "type": "string",
            "description": "時間範圍過濾：1h（1小時）、3h（3小時）、6h（6小時）、12h（12小時）、1d（1天）、7d（7天）、1m（1個月）、1y（1年）。不傳則無限制。",
            "enum": ["1h", "3h", "6h", "12h", "1d", "7d", "1m", "1y"]
          }
        },
        "required": ["query"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "calculate",
      "description": "執行數學運算，返回精確結果。支援四則運算（+、-、*、/）、取模（%）、括號、冪次（用 ^ 符號）及數學函式（sqrt、abs、ceil、floor、round、log、log2、log10、sin、cos、tan、pow）。pow 需傳入兩個引數：pow(base, exp)。",
      "parameters": {
        "type": "object",
        "properties": {
          "expression": {
            "type": "string",
            "description": "數學表達式，例如 '(100 + 200) * 3'、'10 % 3'、'2 ^ 10'、'sqrt(2)'、'pow(2, 10)'、'1000000 * 0.07 / 12'"
          }
        },
        "required": ["expression"]
      }
    }
  }
]
